(()=>{new class{constructor(t,e,s,i){this.chartWrapper=document.querySelector(t),this.button=document.querySelector(e),this.chosenValueWrapper=document.querySelector(s),this.chosenImgWrapper=document.querySelector(i),this.listItems=document.querySelectorAll(`${t} li`),this.openList=this.openList.bind(this),this.changeMainValue=this.changeMainValue.bind(this),this.addListener()}addListener(){this.button.addEventListener("click",this.openList)}openList(){this.chartWrapper.classList.add("open"),this.addListItemsListener(),document.addEventListener("click",(t=>{t.target.classList.contains("language-button")||this.closeList()}))}closeList(){this.chartWrapper.classList.remove("open")}addListItemsListener(){for(let t=0;t<this.listItems.length;t++)this.listItems[t].addEventListener("click",this.changeMainValue)}changeMainValue(t){const e=t.target.dataset.language,s=`img/flags/${e}.png`,i=`img/flags/${e}.webp`;this.chosenValueWrapper.innerHTML=e;const r=this.chosenImgWrapper.querySelector("img"),n=this.chosenImgWrapper.querySelector("source");r.src=s,n.srcset=i}}(".language-list",".language-button",".chosen-language",".language-flag");const t=new class{constructor(t){this.slides=document.querySelectorAll(`${t} .slider__item`),this.arrrowLeft=document.querySelector(`${t} .arrow-left`),this.arrrowRight=document.querySelector(`${t} .arrow-right`),this.currentNumberWrapper=document.querySelector(`${t} .slider__current-slide`),this.countWrapper=document.querySelector(`${t} .slider__count`),this.length=this.slides.length,this.number=1,this.slideWidth,this.length>0&&(this.slideWidth=this.slides[0].clientWidth),this.translateSliderRight=this.translateSliderRight.bind(this),this.translateSliderLeft=this.translateSliderLeft.bind(this),this.slidesStartPosition(),this.addListeners()}slidesStartPosition(){if(this.countWrapper.innerHTML=this.length,window.matchMedia("(max-width: 750px)").matches)for(let t=0;t<this.slides.length;t++){const e=this.slides[t];this.number=2,1===t?this.setStyleFront(e,1):0===t?this.setStyleBackFirst(e,0):2===t?this.setStyleBackFirst(e,2):this.setOtherStyle(e,3)}else for(let t=0;t<this.slides.length;t++){const e=this.slides[t];0===t?this.setStyleFront(e,0):1===t?this.setStyleBackFirst(e,1):2===t?this.setStyleBackSecond(e,2):this.setOtherStyle(e,3)}this.addClass(),this.descriptionStartPosition()}addListeners(){this.arrrowRight.addEventListener("click",this.translateSliderRight),this.arrrowLeft.addEventListener("click",this.translateSliderLeft)}descriptionStartPosition(){const t=document.querySelectorAll(".slider-item__description"),e=30+this.slides[0].clientHeight;for(let s=0;s<t.length;s++)t[s].style.top=`${e}px`}addClass(){this.currentNumberWrapper.innerHTML=this.number,document.querySelector(".slider-item._active").classList.remove("_active"),this.slides[this.number-1].classList.add("_active")}translateSliderRight(){this.number<this.length&&(this.number++,this.addClass(),this.length<3?(this.setStyleFront(this.slides[this.number-1]),this.setStyleBackFirst(this.slides[this.number-2],this.number-2)):this.number!==this.length?this.translateMiddleSlide():(this.setStyleFront(this.slides[this.number-1]),this.setStyleBackFirst(this.slides[this.number-2],this.number-2),this.setStyleBackSecond(this.slides[this.number-3],this.number-3)))}translateSliderLeft(){this.number>1&&(this.number--,this.addClass(),this.length<3?(this.setStyleFront(this.slides[this.number-1]),this.setStyleBackFirst(this.slides[this.number],this.number)):1!==this.number?this.translateMiddleSlide():(this.setStyleFront(this.slides[this.number-1]),this.setStyleBackFirst(this.slides[this.number],this.number),this.setStyleBackSecond(this.slides[this.number+1],this.number+1)))}translateMiddleSlide(){this.setStyleFront(this.slides[this.number-1]),this.setStyleBackFirst(this.slides[this.number-2],this.number-2),this.setStyleBackFirst(this.slides[this.number],this.number),void 0!==this.slides[this.number-3]&&this.setOtherStyle(this.slides[this.number-3]),void 0!==this.slides[this.number+1]&&this.setOtherStyle(this.slides[this.number+1])}setStyleFront(t){t.style="transform: scale(1) translate(0px,0);opacity: 1;z-index:3"}setStyleBackFirst(t,e){let s;s=e+1>this.number?50:-50,t.style=`transform: scale(0.85) translate(${s}%,0);opacity: 0.4;z-index:2`}setStyleBackSecond(t,e){let s;s=e+1>this.number?100:-100,t.style=`transform: scale(0.75) translate(${s}%,0);opacity: 0.3;z-index:1`}setOtherStyle(t){t.style="transform: scale(0.75) translate(0px,0);opacity: 0;z-index:0"}}(".details");let e=new Map([["2020-04-12",10],["2020-04-29",16],["2020-05-20",17],["2020-06-13",18],["2020-07-17",38],["2020-08-30",40],["2020-09-13",143],["2020-10-30",146]]);new class{constructor(t,e,s,i,r,n){this.chartWrapper=document.querySelector(`${t}`),this.showValueWrapper=document.querySelector(`${e}`),this.svgChart=document.querySelector(`${s}`),this.chartWidth=this.chartWrapper.clientWidth,this.chartHeight=this.chartWrapper.clientHeight,this.points="",this.maxPoint=0,this.pointsMap=i,this.firstDate=Date.parse(r),this.lastDate=Date.parse(n),this.pointsRange=this.chartWidth/((this.lastDate-this.firstDate)/1e3/60/60/24),this.pointsStep,this.showValue=this.showValue.bind(this),this.foundMax(),this.setPoints(),this.createXY(),this.addListener()}foundMax(){this.pointsMap.forEach(((t,e,s)=>{t>this.maxPoint&&(this.maxPoint=t)})),this.pointsStep=Math.floor(this.chartHeight/this.maxPoint)}setPoints(){this.pointsMap.forEach(((t,e)=>{const s=this.chartHeight-t*this.pointsStep,i=(Date.parse(e)-this.firstDate)/1e3/60/60/24,r=this.pointsRange*i;this.points+=`${r},${s} `})),this.svgChart.setAttribute("points",this.points)}createXY(){const t=this.chartWrapper.getBoundingClientRect();this.x=t.top,this.y=t.left}addListener(){this.chartWrapper.addEventListener("pointerover",this.showValue)}showValue(t){t.clientX,t.clientY}}(".chart",".users-chart__total span",".chart-svg polyline",e,"2020-04-12","2020-10-30");const s=document.querySelectorAll(".watch-button");for(let t=0;t<s.length;t++)s[t].addEventListener("click",i);function i(t){t.target.parentElement.classList.add("_hidden"),t.target.removeEventListener("click",i)}function r(t){t.preventDefault();const e=t.target;document.querySelector(".navigation__item._active").classList.remove("_active"),e.classList.add("_active"),h(Array.prototype.indexOf.call(n,e));const s=e.dataset.ref;let i=document.querySelector(`.${s}`).getBoundingClientRect().top;i>0&&(i-=100),window.scrollBy({top:i,behavior:"smooth"})}document.querySelector("#arrow-to-video").addEventListener("click",(t=>{t.preventDefault();let e=document.querySelector(".details").getBoundingClientRect().top;e>0&&(e-=100),window.scrollBy({top:e,behavior:"smooth"})})),document.querySelectorAll("li[data-ref]").forEach((t=>{t.addEventListener("click",r)}));const n=document.querySelectorAll("li[data-ref]");function h(t){for(let e=0;e<n.length;e++){const s=n[e];let i;i=e<t?1+(e-t)/5:1-(e-t)/5,s.style.opacity=`${i}`}}function a(){window.matchMedia("(max-width: 550px)").matches?(l("triangle-small"),o("watch-video-small")):(l("triangle"),o("watch-video"))}function l(t){const e=document.querySelectorAll(".watch-button button svg");for(let s=0;s<e.length;s++)e[s].innerHTML=`<use xlink:href="img/icons/sprite.svg#${t}"></use>`}function o(t){const e=document.querySelectorAll(".watch-button__text svg");for(let s=0;s<e.length;s++)e[s].innerHTML=`<use xlink:href="img/icons/sprite.svg#${t}"></use>`}!function(){const t=new IntersectionObserver((t=>{t.forEach((t=>{const e=t.target.dataset.ref,s=document.querySelector(`li[data-ref="${e}"`);t.isIntersecting&&(document.querySelector(".navigation__item._active").classList.remove("_active"),s.classList.add("_active"),h(Array.prototype.indexOf.call(n,s)))}))}),{threshold:0,rootMargin:"-50px 0px -55% 0px"});for(let e=0;e<n.length;e++){const s=n[e].dataset.ref,i=document.querySelector(`.${s}`);t.observe(i)}}(),h(0),window.onresize=e=>{a(),t.descriptionStartPosition()},a()})();